# Production Environment Configuration
# Copy this file to .env in production and update all values with your production credentials
# NEVER commit the actual .env file to version control!

# ========================================
# DATABASE CONFIGURATION
# ========================================

# PostgreSQL (Recommended for Production)
DATABASE_URL="postgresql://username:password@hostname:5432/forensics_db?schema=public"

# OR SQLite (For small deployments only)
# DATABASE_URL="file:./prisma/production.db"

# Docker Compose Database Variables (if using docker-compose)
DB_USER=forensics_prod
DB_PASSWORD=CHANGE_THIS_TO_A_STRONG_PASSWORD
DB_NAME=forensics_simulator_prod
DB_PORT=5432

# ========================================
# APPLICATION CONFIGURATION
# ========================================

# Server Configuration
PORT=5000
NODE_ENV=production

# Backend/Frontend Ports (for Docker)
BACKEND_PORT=5000
FRONTEND_PORT=80

# ========================================
# SECURITY - JWT CONFIGURATION (CRITICAL!)
# ========================================

# Generate secure secret with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=CHANGE_THIS_TO_A_RANDOM_STRING_AT_LEAST_32_CHARACTERS_LONG
JWT_EXPIRES_IN=7d

# Session Secret (if implementing sessions)
SESSION_SECRET=CHANGE_THIS_TO_A_RANDOM_STRING

# ========================================
# CORS & FRONTEND CONFIGURATION
# ========================================

# Frontend URL (single domain for CORS)
FRONTEND_URL=https://your-domain.com

# Multiple allowed CORS origins (comma-separated, takes precedence over FRONTEND_URL)
# Example: ALLOWED_ORIGINS=https://your-domain.com,https://www.your-domain.com,https://app.your-domain.com
ALLOWED_ORIGINS=https://your-domain.com

# Allowed hosts for additional security
ALLOWED_HOSTS=your-domain.com,www.your-domain.com

# Frontend API URL (for VITE build)
VITE_API_URL=https://api.your-domain.com/api

# ========================================
# RATE LIMITING CONFIGURATION (REQUIRED)
# ========================================

# Rate limit window in milliseconds (15 minutes = 900000ms)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window for general API endpoints
RATE_LIMIT_MAX_REQUESTS=100

# Maximum authentication attempts per window (strict limit for brute force protection)
RATE_LIMIT_AUTH_MAX=5

# Maximum file uploads per window
RATE_LIMIT_UPLOAD_MAX=10

# ========================================
# FILE UPLOAD CONFIGURATION
# ========================================

# Maximum file size in bytes (5GB = 5368709120)
MAX_UPLOAD_SIZE=5368709120

# Upload directory path
UPLOAD_PATH=./uploads

# ========================================
# EMAIL CONFIGURATION (Optional - for notifications)
# ========================================

# SMTP Configuration (SendGrid example)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=YOUR_SENDGRID_API_KEY
SMTP_FROM=noreply@your-domain.com

# OR Gmail SMTP
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-app-specific-password
# SMTP_FROM=noreply@your-domain.com

# ========================================
# LOGGING CONFIGURATION
# ========================================

# Log Level (error, warn, info, http, verbose, debug)
LOG_LEVEL=warn

# Log File Path (optional)
LOG_FILE=/var/log/forensics/app.log

# Enable HTTP access logs
ENABLE_ACCESS_LOGS=true

# ========================================
# SSL/TLS CONFIGURATION
# ========================================
# (Usually handled by reverse proxy like Nginx, but included for reference)

# SSL Certificate paths
# SSL_CERT_PATH=/etc/ssl/certs/your-cert.crt
# SSL_KEY_PATH=/etc/ssl/private/your-key.key

# ========================================
# DOCKER CONFIGURATION
# ========================================

# Docker project name
COMPOSE_PROJECT_NAME=forensics-simulator

# Force mock/demo mode for forensic tools (set to false if using real Docker tools)
FORCE_MOCK_DOCKER=true

# ========================================
# BACKUP CONFIGURATION (Optional)
# ========================================

# Enable automated backups
# BACKUP_ENABLED=true

# Backup schedule (cron format: 0 2 * * * = daily at 2 AM)
# BACKUP_SCHEDULE=0 2 * * *

# Backup retention in days
# BACKUP_RETENTION_DAYS=30

# Backup storage path
# BACKUP_PATH=/var/backups/forensics

# ========================================
# PERFORMANCE TUNING
# ========================================

# Maximum database connections
# MAX_CONNECTIONS=100

# Request timeout (milliseconds)
# REQUEST_TIMEOUT_MS=30000

# Keep-alive timeout
# KEEPALIVE_TIMEOUT_MS=65000

# Enable response compression
ENABLE_COMPRESSION=true

# Trust proxy (set to true if behind Nginx/load balancer)
TRUST_PROXY=true

# ========================================
# MONITORING & ANALYTICS (Optional)
# ========================================

# Sentry for error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# New Relic APM
# NEW_RELIC_LICENSE_KEY=your-license-key
# NEW_RELIC_APP_NAME=forensics-simulator

# Google Analytics
# GA_TRACKING_ID=UA-XXXXXXXXX-X

# ========================================
# CDN & STATIC ASSETS (Optional)
# ========================================

# CDN URL for static assets
# CDN_URL=https://cdn.your-domain.com
# STATIC_ASSETS_URL=https://assets.your-domain.com

# ========================================
# REDIS CONFIGURATION (Optional - for caching/sessions)
# ========================================

# Redis connection URL
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your-redis-password
# REDIS_DB=0

# ========================================
# CLOUD STORAGE (Optional - AWS S3)
# ========================================

# AWS S3 for file storage
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_S3_BUCKET=forensics-evidence-files

# ========================================
# FEATURE FLAGS
# ========================================

# Enable/disable features in production
# ENABLE_USER_REGISTRATION=true
# ENABLE_FILE_UPLOAD=true
# ENABLE_LEADERBOARD=true
# ENABLE_ADMIN_DASHBOARD=true

# Maintenance mode
# MAINTENANCE_MODE=false
# MAINTENANCE_MESSAGE="System under maintenance. Back soon!"

# ========================================
# SECURITY NOTES
# ========================================

# 1. NEVER commit this file with real credentials to Git
# 2. Use strong, unique passwords (minimum 32 characters for secrets)
# 3. Rotate secrets regularly (every 90 days recommended)
# 4. Use a secrets manager in production (AWS Secrets Manager, HashiCorp Vault)
# 5. Enable 2FA on all admin accounts and cloud services
# 6. Monitor logs for security events
# 7. Keep all dependencies up to date
# 8. Use HTTPS everywhere (enforce with HSTS headers)
# 9. Implement rate limiting to prevent abuse
# 10. Regular security audits and penetration testing
